### Шанс вопроса: 13%

Роль в Ansible — это основная структура, которая позволяет группировать задачи, переменные, обработчики и другие ресурсы в одно место. Она упрощает управление конфигурациями за счет модульности и повторного использования. Роль состоит из нескольких основных компонентов:

1. **main.yml**: Файл, который запускает роль. Он определяет список задач для выполнения при установке роли. Это точка входа для роли.
2. **tasks/**: Каталог, содержащий файлы с задачами (задачи — это набор действий, которые Ansible будет выполнять). Каждая задача определяет конкретное действие, например установку пакета или настройку конфигурации.
3. **vars/**: Каталог для переменных, которые могут использоваться в рамках роли. Эти переменные позволяют управлять конфигурациями и параметрами без изменения основной логики роли.
4. **handlers/**: Каталог для обработчиков, которые вызываются по окончании задач. Обработчики используются для перезапуска сервисов или других действий, требующих повторного запуска.
5. **defaults/**: Каталог для файлов с дефолтными переменными, которые могут быть переопределены при использовании роли. Это позволяет пользователю легко настроить параметры без изменения самой роли.
6. **meta/**: Каталог для метаданных о роли, таких как зависимости или информация о версии.

Пример структуры роли:
```
my_role/
├── defaults
│   └── main.yml
├── files/
├── handlers
│   └── main.yml
├── meta
│   └── main.yml
├── tasks
│   └── main.yml
├── templates/
├── vars
│   └── main.yml
└── README.md
```

В `tasks/main.yml` можно определить задачи, например:
```yaml
---
- name: Установка пакета
  become: yes
  yum:
    name: httpd
    state: present

- name: Настройка конфигурационного файла
  template:
    src: templates/httpd.conf.j2
    dest: /etc/httpd/httpd.conf
```

В `handlers/main.yml` можно определить обработчик для перезапуска сервиса:
```yaml
---
- name: Перезапуск Apache
  become: yes
  service:
    name: httpd
    state: restarted
```

Таким образом, роль в Ansible является мощным инструментом для управления конфигурациями, обеспечивая модульность, переносимость и возможность повторного использования кода.