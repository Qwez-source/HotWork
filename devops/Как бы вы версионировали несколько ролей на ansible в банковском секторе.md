### Шанс вопроса: 6%

В банковском секторе, где безопасность и стабильность являются ключевыми аспектами, версионирование ролей в Ansible играет важную роль. Версия роли может включать в себя изменения конфигурации, обновления зависимостей или новые функции. Вот как можно организовать версионирование нескольких ролей на Ansible:

1. **Иерархия директорий**: Создайте иерархию директорий для каждой роли, где будут храниться различные версии роли. Например:
   ```
   roles/
   ├── role_name_v1/
   │   ├── tasks/
   │   ├── handlers/
   │   ├── defaults/
   │   └── meta/
   ├── role_name_v2/
   │   ├── tasks/
   │   ├── handlers/
   │   ├── defaults/
   │   └── meta/
   ```

2. **Метаданные в `meta/main.yml`**: В каждой версии роли укажите информацию о себе, включая версию:
   ```yaml
   # roles/role_name_v1/meta/main.yml
   galaxy_info:
     author: your_name
     description: Role to do something with version 1
     company: your_company
     license: MIT
     min_ansible_version: 2.9
     platforms:
       - name: Ubuntu
         versions:
           - "18.04"
           - "20.04"
     dependencies: []
   ```

3. **Использование версионирования**: При вызове роли в плейбуке указывайте конкретную версию:
   ```yaml
   - hosts: all
     roles:
       - role: role_name_v1
         version: 1.0.0
   ```

4. **Обновление ролей**: При необходимости обновить роль используйте новую версию, указав её в плейбуке:
   ```yaml
   - hosts: all
     roles:
       - role: role_name_v2
         version: 2.0.0
   ```

5. **Тестирование и откат**: Перед применением новых версий ролей, проверьте и протестируйте их в тестовой среде. В случае проблемного обновления можно быстро откатиться к предыдущей версии.

Этот подход позволяет легко управлять версиями ролей, обеспечивая возможность тестирования и отката при любых изменениях в конфигурации или функциональности.