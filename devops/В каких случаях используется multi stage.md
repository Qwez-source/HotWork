### Шанс вопроса: 6%

Multi-stage builds в Docker позволяют создать образ, который является минимальным для запуска приложения, а все промежуточные этапы сборки выполняются в другом образе. Это удобно, когда ваше приложение требует сложных настроек или установки множества зависимостей.

### Основные преимущества:
1. **Уменьшение размера финального образа**: Multi-stage builds позволяют использовать более легковесные базовые образы для этапов сборки, что уменьшает размер окончательного Docker-образа.
2. **Безопасность**: Разделение этапов сборки и запуска уменьшает риск раскрытия чувствительной информации через образы.
3. **Удобство совместной разработки**: Разработчики могут работать с более легковесными образами во время сборки, не беспокоясь о размере и безопасности финального образа.

### Пример использования:
Предположим, у вас есть Java-приложение, которое требует установки Maven для сборки, но в продакшене нет необходимости устанавливать его через apt-get. Вы можете создать Dockerfile с multi-stage build:

```dockerfile
# Этап сборки
FROM maven:3.6.3-jdk-11 AS builder
COPY . /app
WORKDIR /app
RUN mvn package -DskipTests

# Этап запуска
FROM openjdk:11-jre-slim
WORKDIR /app
COPY --from=builder /app/target/*.jar /app/app.jar
ENTRYPOINT ["java", "-jar", "app.jar"]
```

В этом примере первый этап использует образ maven для сборки проекта, а второй этап использует более легкий базовый образ openjdk для запуска приложения. Все промежуточные файлы и инструменты установленные в первом этапе не попадут в финальный образ.

### Особенности:
- **Этапы сборки**: Вы можете определить несколько этапов, каждый из которых использует свой базовый образ. Это позволяет уменьшить размер финального образа и сделать его более безопасным.
- **Передача файлов**: Использование `COPY --from=этап` позволяет передавать скомпилированные бинарники или другие промежуточные результаты между этапами, не загрязняя основной образ.
- **Удобство управления**: Multi-stage builds упрощают управление зависимостями и сборку образов, делая процесс более организованным.

Таким образом, multi-stage builds являются мощным инструментом для создания эффективных и безопасных Docker-образов, особенно когда требуется сложная настройка или установка множества зависимостей.