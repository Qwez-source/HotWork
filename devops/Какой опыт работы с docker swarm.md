### Шанс вопроса: 6%

Docker Swarm — это инструмент оркестрации контейнеров от компании Docker, который позволяет создавать кластеры из управляемых узлов. Он предоставляет API для управления контейнерами и сетевыми настройками в кластере. В моем предыдущем проекте я занимался настройкой и развертыванием приложения с использованием Docker Swarm для обеспечения масштабируемости и доступности сервисов.

Основные шаги, которые мы предприняли:
1. **Планирование кластера**: Определили количество узлов (рабочих станций) в зависимости от требуемой мощности и масштабируемости.
2. **Настройка Docker Swarm**: Инициализировали swarm на одном из узлов, сделав его менеджером. Затем добавили другие узлы в кластер.
3. **Развертывание сервисов**: Использовали Docker Compose файлы для определения сервисов, которые будут запущены в кластере. Например, файл `docker-compose.yml` для приложения:
    ```yaml
    version: '3'
    services:
      web:
        image: nginx:latest
        ports:
          - "80:80"
      db:
        image: postgres:latest
        environment:
          POSTGRES_DB: mydb
          POSTGRES_USER: myuser
          POSTGRES_PASSWORD: mypass
    ```
4. **Масштабирование сервисов**: Настроили автоматическое масштабирование для сервисов, используя параметр `scale` в Docker Compose файле или команды Swarm. Например, чтобы увеличить количество копий сервиса `web`, можно выполнить команду:
    ```sh
    docker service scale web=3
    ```
5. **Балансировка нагрузки**: Настроили балансировку нагрузки между узлами с помощью DNS-имени, заданного для сервиса в Docker Compose файле или через параметры `--endpoint-mode` при создании сервиса.
6. **Обновление сервисов**: Провели обновление сервисов с нужной последовательностью (rolling update), чтобы обеспечить непрерывность обслуживания:
    ```sh
    docker service update --image nginx:stable-alpine3.8 web
    ```
7. **Мониторинг и логирование**: Использовали Docker Swarm mode для мониторинга состояния узлов и сервисов, а также для сбора логов через систему мониторинга, такую как Prometheus и Grafana.

Этот опыт помог мне лучше понять принципы оркестрации контейнерных приложений и работу инструментов управления кластерами Docker.