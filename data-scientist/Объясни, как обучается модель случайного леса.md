### Шанс вопроса: 14%

Случайный лес — это ансамбль решающих деревьев. Обучение модели случайного леса происходит в несколько этапов:

1. **Сбор данных**: Собираются данные для обучения. Эти данные должны включать как признаки (features), так и метки (labels).

2. **Разделение набора данных**: Набор данных разбивается на несколько подмножеств (сабсетов) случайным образом. Каждый сабсет используется для обучения отдельного дерева решений.

3. **Построение каждого дерева**: Для каждого сабсета строится индивидуальное дерево решений:
   - Случайным образом выбирается подмножество признаков для каждого узла.
   - На каждом шаге ветвления (split) выбираются лучшие признаки, которые максимизируют энтропию или уменьшают критерий качества (например, информационный gain).

4. **Комбинирование результатов**: После построения всех деревьев происходит комбинирование их результатов:
   - Для классификации голосуется за каждый класс, а для регрессии вычисляется среднее значение ответов.
   - Случайный лес объединяет эти результаты, чтобы предсказывать класс или значение с большей точностью.

5. **Оценка модели**: Оценивается качество модели путем кросс-валидации или тестирования на отдельном наборе данных.

Пример кода на Python для построения случайного леса с использованием библиотеки scikit-learn:

```python
from sklearn.ensemble import RandomForestClassifier
from sklearn.datasets import make_classification
from sklearn.model_selection import train_test_split

# Создаем случайный набор данных для классификации
X, y = make_classification(n_samples=1000, n_features=20, random_state=42)

# Разделяем данные на обучающую и тестовую выборки
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3, random_state=42)

# Создаем модель случайного леса с 100 деревьями и максимальной глубиной каждого дерева 5
rf_classifier = RandomForestClassifier(n_estimators=100, max_depth=5, random_state=42)

# Обучаем модель
rf_classifier.fit(X_train, y_train)

# Делаем предсказание на тестовой выборке
predictions = rf_classifier.predict(X_test)
```

Этот код создает и обучает случайный лес из 100 деревьев, каждое из которых имеет максимальную глубину 5 узлов. Модель затем используется для предсказания классов на тестовой выборке.