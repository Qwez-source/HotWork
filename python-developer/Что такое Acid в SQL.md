### Шанс вопроса: 20%

Acid в SQL означает ACID properties, что являются четырьмя важными свойствами транзакционных систем. Эти свойства обеспечивают атомарность, согласованность, изолированность и долговечность данных в базе данных. Давайте разберем каждое из этих свойств подробнее:

1. **Атомарность (Atomicity)**: Атомарность гарантирует, что все операции внутри транзакции являются атомарными, то есть либо все операции выполняются успешно, либо ни одна не выполняется. Если в процессе выполнения возникает сбой, система откатывает все изменения, как будто транзакция никогда и не началась.

2. **Согласованность (Consistency)**: Согласованность означает, что транзакция переводит базу данных из одного согласованного состояния в другое. Например, если вы переводите деньги с одного счета на другой, то после транзакции должно быть обеспечено, что сумма денег на обоих счетах корректно обновлена или осталась неизменной.

3. **Изолированность (Isolation)**: Изолированность гарантирует, что параллельное выполнение транзакций не влияет друг на друга. Каждая транзакция должна видеть мир в целом как бы единственного пользователя. Это может быть достигнуто с помощью различных методов блокировки, таких как блокировка строк или страниц.

4. **Долговечность (Durability)**: Долговечность означает, что данные, измененные транзакциями, должны быть устойчивы к сбоям и остаются неизменными после завершения транзакции. Это обычно достигается путем периодического архивирования или резервного копирования данных.

Пример кода для демонстрации ACID свойств в Python с использованием библиотеки `sqlite3` (встроенной в стандартную библиотеку Python):

```python
import sqlite3

def create_connection(db_file):
    conn = sqlite3.connect(db_file)
    return conn

def create_table(conn):
    cursor = conn.cursor()
    cursor.execute('''CREATE TABLE IF NOT EXISTS users (id INTEGER PRIMARY KEY, name TEXT, balance REAL)''')
    conn.commit()

def add_user(conn, user):
    cursor = conn.cursor()
    cursor.execute("INSERT INTO users (name, balance) VALUES (?, ?)", user)
    conn.commit()

def update_balance(conn, user_id, new_balance):
    cursor = conn.cursor()
    cursor.execute("UPDATE users SET balance = ? WHERE id = ?", (new_balance, user_id))
    conn.commit()

# Создаем соединение с базой данных
conn = create_connection('bank.db')

# Создаем таблицу, если она не существует
create_table(conn)

# Добавляем пользователя
add_user(conn, ('Alice', 1000.0))
add_user(conn, ('Bob', 1500.0))

# Обновляем баланс пользователей
update_balance(conn, 1, 900.0)  # Уменьшаем баланс Alice
update_balance(conn, 2, 1600.0) # Увеличиваем баланс Bob

# Проверяем ACID свойства
try:
    update_balance(conn, 1, -500.0)  # Попытка уменьшить баланс Alice слишком сильно (ожидается ошибка)
except sqlite3.Error as e:
    print("Ошибка при обновлении баланса:", e)

# Закрываем соединение с базой данных
conn.close()
```

В этом примере мы создали простую базу данных с таблицей `users`, добавили двух пользователей и попытались обновить баланс одного из них на недостаточную сумму, чтобы продемонстрировать атомарность транзакций. Если бы мы не использовали ACID свойства, то при возникновении ошибки в процессе обновления баланса все изменения были бы сохранены, что нарушило бы атомарность и согласованность данных.