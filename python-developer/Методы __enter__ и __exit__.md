### Шанс вопроса: 3%

Методы `__enter__` и `__exit__` являются частью протокола контекстного менеджера в Python, который определяется стандартной библиотекой Python через классы. Этот протокол позволяет создавать объекты, которые могут автоматически выполнять код перед началом работы и после её завершения, независимо от того, как оно завершилось (с ошибкой или без неё).

### Метод `__enter__`
Этот метод вызывается при входе в блок with. Он должен возвращать объект, который будет доступен внутри блока as. Обычно используется для подготовки к работе или захвата ресурсов.

```python
class MyContextManager:
    def __enter__(self):
        print("Вход в контекст")
        return self  # Возвращаем себя, чтобы использовать в блоке with

    def __exit__(self, exc_type, exc_val, exc_tb):
        print("Выход из контекста")
        if exc_type is not None:
            print(f"Произошла ошибка: {exc_val}")
        else:
            print("Контекст завершен без ошибок")

with MyContextManager() as manager:
    print("Работа внутри контекста")
```

Вывод будет следующим:
```
Вход в контекст
Работа внутри контекста
Контекст завершен без ошибок
Выход из контекста
```

### Метод `__exit__`
Этот метод вызывается при выходе из блока with. Он может использоваться для освобождения ресурсов, восстановления состояний или обработки исключений. Параметры:
- `exc_type`: Тип исключения (если оно было).
- `exc_val`: Значение исключения (если оно было).
- `exc_tb`: Трассировка стека исключения (если оно было).

```python
try:
    with MyContextManager():
        print("Работа внутри контекста")
        1 / 0  # Приводит к делению на ноль, что создаст исключение
except ZeroDivisionError:
    print("Произошла ошибка деления на ноль")
```

Вывод будет следующим:
```
Вход в контекст
Работа внутри контекста
Произошла ошибка: division by zero
Произошла ошибка деления на ноль
Выход из контекста
```

### Использование
Контекстные менеджеры полезны для управления ресурсами, такими как файлы, сокеты, базы данных и другими. Они обеспечивают гарантию того, что ресурс будет корректно освобожден даже в случае возникновения ошибки внутри блока кода.