### Шанс вопроса: 6%

Для настройки Nginx для выполнения различных задач, таких как разрешение или запрет доступа к определенным ресурсам, перенаправление запросов и установление условий авторизации, можно использовать конфигурационные файлы Nginx. Ниже приведен пример конфигурационного файла для настройки некоторых из этих функций:

1. **Разрешение и запрет доступа:**
   Вы можете использовать директиву `allow` и `deny` в блоке `location`, чтобы контролировать доступ к определенным IP-адресам или подсетям.

   ```nginx
   server {
       listen 80;
       server_name example.com;

       location /protected {
           allow 192.168.1.0/24;  # Разрешаем доступ только с определенной подсети
           deny all;             # Запрещаем доступ остальным IP-адресам

           # Другие настройки для этого location...
       }
   }
   ```

2. **Перенаправление запросов:**
   Для перенаправления запросов можно использовать директиву `return` или `rewrite`. Директива `return` останавливает обработку запроса и возвращает указанный код и сообщение.

   ```nginx
   server {
       listen 80;
       server_name example.com;

       location /redirect {
           return 301 https://www.example.com;  # Перенаправление на HTTPS версию сайта
       }
   }
   ```

3. **Установление условий авторизации:**
   Для защиты ресурса паролем можно использовать модуль `auth_basic`. Это включает базовую аутентификацию, где пользователь должен предоставить имя пользователя и пароль для доступа.

   ```nginx
   server {
       listen 80;
       server_name example.com;

       location /private {
           auth_basic "Restricted Area";  # Сообщение, которое будет показано пользователю при запросе авторизации
           auth_basic_user_file /etc/nginx/.htpasswd;  # Файл с хешированными учетными данными
       }
   }
   ```

Эти примеры демонстрируют, как можно настроить Nginx для различных задач. В реальных проектах вам может понадобиться более сложная конфигурация, в зависимости от требований к безопасности и функциональности сайта.