### Шанс вопроса: 6%

Для создания отказоустойчивого кластера Kubernetes (K8s), следуйте этим шагам:

1. **Использование нескольких узлов**: Разверните несколько виртуальных или физических серверов, которые будут служить узлами в вашем кластере. Это обеспечивает отказоустойчивость и масштабируемость.

2. **Контроллеры репликации**: Используйте контроллеры репликации (Replication Controllers) или деплойменты (Deployments) для обеспечения запуска множества экземпляров одного и того же приложения на разных узлах. Например:
   ```yaml
   apiVersion: apps/v1
   kind: Deployment
   metadata:
     name: my-app
   spec:
     replicas: 3
     selector:
       matchLabels:
         app: my-app
     template:
       metadata:
         labels:
           app: my-app
       spec:
         containers:
         - name: my-app-container
           image: my-app-image:latest
           ports:
           - containerPort: 80
   ```

3. **Службы**: Создайте сервисы (Services), которые будут обеспечивать сетевым интерфейсом группу реплик приложения. Например:
   ```yaml
   apiVersion: v1
   kind: Service
   metadata:
     name: my-app-service
   spec:
     selector:
       app: my-app
     ports:
       - protocol: TCP
         port: 80
         targetPort: 80
   ```

4. **Балансировка нагрузки**: Используйте Ingress или Service типа NodePort для балансировки нагрузки между репликами приложения. Например, для NodePort:
   ```yaml
   apiVersion: v1
   kind: Service
   metadata:
     name: my-app-service
   spec:
     type: NodePort
     selector:
       app: my-app
     ports:
       - protocol: TCP
         port: 80
         targetPort: 80
   ```

5. **Резервное копирование и восстановление**: Регулярно создавайте бекапы критически важных данных и конфигураций с помощью инструментов, таких как Velero или MinIO. Убедитесь, что эти бэкапы могут быть восстановлены в случае отказа одного из узлов.

6. **Мониторинг и алертинги**: Используйте инструменты мониторинга (например, Prometheus) для отслеживания состояния кластера и компонентов. Настройте алерты с помощью Alertmanager, чтобы получать уведомления о потенциальных проблемах.

7. **Тестирование**: Проводите регулярные тесты отказа (failover-тесты) для проверки способности кластера восстанавливаться после сбоев и обеспечения непрерывной доступности сервисов.

Следуя этим шагам, вы создадите устойчивый и отказоустойчивый кластер Kubernetes.